<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robust and Interpretable Early Triaging Support system (RIETS)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body style="background: url('https://www.wallpapertip.com/wmimgs/217-2176491_the-effects-of-temperature-and-humidity-on-cov.jpg')">
<div class="container mt-5">
    <h2 class="text-center p-3 text-dark rounded" style="background-color: #d8dae6;">Robust and Interpretable Early Triaging Support system (RIETS)</h2>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <form action="/predict" method="post" class="bg-light p-4 rounded">
                 {% if error_message %}
                <div class="alert alert-danger" role="alert">
                    {{ error_message }}
                </div>
                {% endif %}
                
                <!-- Age Input -->
                <div class="mb-3">
                    <label for="Age" class="form-label">Age (years)</label>
                    <input type="number" class="form-control" name="Age" id="Age" min="0" max="120" value="{{ previous_data['Age'] if previous_data else '' }}" required>
                </div>

                <!-- Dyspnea Input -->
                <div class="mb-3">
                    <label for="dyspnea" class="form-label">Dyspnea (0=no/1=yes)</label>
                    <input type="number" class="form-control" name="dyspnea" id="dyspnea" min="0" max="1" value="{{ previous_data['dyspnea'] if previous_data else '' }}" required>
                </div>

                <!-- DM Input -->
                <div class="mb-3">
                    <label for="DM" class="form-label">Diabetes Mellitus (0=no/1=yes)</label>
                    <input type="number" class="form-control" name="DM" id="DM" min="0" max="1" value="{{ previous_data['DM'] if previous_data else '' }}" required>
                </div>

                <!-- SPO2 Input -->
                <div class="mb-3">
                    <label for="SPO2" class="form-label">Oxygen Saturation (%)</label>
                    <input type="number" class="form-control" name="SPO2" id="SPO2" min="0" max="100" value="{{ previous_data['SPO2'] if previous_data else '' }}" required>
                </div>

                <!-- RR Input -->
                <div class="mb-3">
                    <label for="RR" class="form-label">Respiratory Rate (/min)</label>
                    <input type="number" class="form-control" name="RR" id="RR" min="0" max="100" value="{{ previous_data['RR'] if previous_data else '' }}" required>
                </div>

                <!-- CRP Input -->
                <div class="mb-3">
                    <label for="CRP" class="form-label">C-reactive Protein (mg/dL)</label>
                    <input type="number" class="form-control" name="CRP" id="CRP" min="0" max="1000" value="{{ previous_data['CRP'] if previous_data else '' }}" required>
                </div>

                <!-- LDH Input -->
                <div class="mb-3">
                    <label for="LDH" class="form-label">Lactate Dehydrogenase (U/L)</label>
                    <input type="number" class="form-control" name="LDH" id="LDH" min="0" max="10000" value="{{ previous_data['LDH'] if previous_data else '' }}" required>
                </div>

                <!-- ANC Input -->
                <div class="mb-3">
                    <label for="ANC" class="form-label">Absolute Neutrophil Count (/uL)</label>
                    <input type="number" class="form-control" name="ANC" id="ANC" min="0" max="100000" value="{{ previous_data['ANC'] if previous_data else '' }}" required>
                </div>

                <!-- WBC Input -->
                <div class="mb-3">
                    <label for="WBC" class="form-label">White Blood Cell Count (/uL)</label>
                    <input type="number" class="form-control" name="WBC" id="WBC" min="0" max="100000" value="{{ previous_data['WBC'] if previous_data else '' }}" required>
                </div>

                <!-- ALC Input -->
                <div class="mb-3">
                    <label for="ALC" class="form-label">Absolute Lymphocyte Count (/uL)</label>
                    <input type="number" class="form-control" name="ALC" id="ALC" min="0" max="100000" value="{{ previous_data['ALC'] if previous_data else '' }}" required>
                </div>

                <!-- PLT Input -->
                <div class="mb-3">
                    <label for="PLT" class="form-label">Platelet Count (/uL)</label>
                    <input type="number" class="form-control" name="PLT" id="PLT" min="0" max="1000000" value="{{ previous_data['PLT'] if previous_data else '' }}" required>
                </div>

                <div class="mb-3">
                    <input type="submit" value="Predict" class="btn" style="background-color: #d8dae6;">
                </div>
            </form>
        </div>
    </div>
    <!-- RIETS Description -->
    <div class="mt-5 p-3 bg-light rounded">
        <p><strong>About RIETS:</strong> RIETS is a machine learning-based prognostic model aimed at early patient triaging for COVID-19 severity. It was developed based on extensive data from geographically distributed 19 hospitals in South Korea over a three-year pandemic period. Incorporating 11 readily available features upon hospitalization, it provides risk estimates and detailed interpretations that may assist clinical decision-making. RIETS is recognized for its robust discriminative power (AUC of 0.937 [0.935-0.938], novel interpretability through DDRTree technique (see results page), and high potential for clinical applicability.</p>
        <p>For more inquiries regarding RIETS, please email: <a href="mailto:baeksw98@gmail.com">baeksw98@gmail.com</a></p>
    </div>
    
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<div class="footer-text mt-3 text-center"> Built by Sangwon Baek @Samsung Medical Center, Seoul, South Korea </div>
</body>
</html>